syntax = "proto3";
package slg.building.v1_0_0;

option go_package = "slg/v1_0_0/building;building";

import "slg-proto/v1.0.0/common/types.proto";

// åŸå¸‚ä¿¡æ¯
message CityInfo {
    string city_id = 1;                      // åŸå¸‚ID
    string player_id = 2;                    // ç©å®¶ID
    string city_name = 3;                    // åŸå¸‚åç§°
    int32 city_level = 4;                    // åŸå¸‚ç­‰çº§
    slg.common.v1_0_0.Position position = 5;     // åŸå¸‚ä½ç½®
    repeated BuildingInfo buildings = 6;     // å»ºç­‘åˆ—è¡¨
    repeated slg.common.v1_0_0.Resource resources = 7; // èµ„æºçŠ¶å†µ
    CityStatus status = 8;                   // åŸå¸‚çŠ¶æ€?
    int64 last_update = 9;                   // æœ€åæ›´æ–°æ—¶é—?
}

// å»ºç­‘ä¿¡æ¯
message BuildingInfo {
    string building_id = 1;                  // å»ºç­‘ID
    string template_id = 2;                  // å»ºç­‘æ¨¡æ¿ID
    BuildingType building_type = 3;          // å»ºç­‘ç±»å‹
    int32 building_level = 4;                // å»ºç­‘ç­‰çº§
    slg.common.v1_0_0.Position position = 5;     // å»ºç­‘ä½ç½®
    BuildingStatus status = 6;               // å»ºç­‘çŠ¶æ€?
    int64 construction_start = 7;            // å»ºé€ å¼€å§‹æ—¶é—?
    int64 construction_end = 8;              // å»ºé€ å®Œæˆæ—¶é—?
    repeated ProductionQueue production = 9;  // ç”Ÿäº§é˜Ÿåˆ—
    map<string, int32> properties = 10;      // å»ºç­‘å±æ€?
}

// å»ºç­‘å‡çº§è¯·æ±‚
message BuildingUpgradeRequest {
    string building_id = 1;                  // å»ºç­‘ID
    string player_id = 2;                    // ç©å®¶ID
    bool use_speedup = 3;                    // æ˜¯å¦ä½¿ç”¨åŠ é€Ÿé“å…?
    string speedup_item_id = 4;              // åŠ é€Ÿé“å…·ID
}

// å»ºç­‘å‡çº§å“åº”
message BuildingUpgradeResponse {
    slg.common.v1_0_0.ErrorInfo error = 1;       // é”™è¯¯ä¿¡æ¯
    BuildingInfo building = 2;               // æ›´æ–°åçš„å»ºç­‘ä¿¡æ¯
    repeated slg.common.v1_0_0.Resource cost = 3; // æ¶ˆè€—çš„èµ„æº
    int64 completion_time = 4;               // å®Œæˆæ—¶é—´
}

// ç”Ÿäº§é˜Ÿåˆ—é¡?
message ProductionQueue {
    string queue_id = 1;                     // é˜Ÿåˆ—é¡¹ID
    string template_id = 2;                  // ç”Ÿäº§æ¨¡æ¿ID
    ProductionType production_type = 3;      // ç”Ÿäº§ç±»å‹
    int32 quantity = 4;                      // ç”Ÿäº§æ•°é‡
    int64 start_time = 5;                    // å¼€å§‹æ—¶é—?
    int64 completion_time = 6;               // å®Œæˆæ—¶é—´
    ProductionStatus status = 7;             // ç”Ÿäº§çŠ¶æ€?
}

// èµ„æºæ”¶é›†è¯·æ±‚
message ResourceCollectRequest {
    string building_id = 1;                  // å»ºç­‘ID
    string player_id = 2;                    // ç©å®¶ID
    slg.common.v1_0_0.ResourceType resource_type = 3; // èµ„æºç±»å‹
}

// èµ„æºæ”¶é›†å“åº”
message ResourceCollectResponse {
    slg.common.v1_0_0.ErrorInfo error = 1;       // é”™è¯¯ä¿¡æ¯
    repeated slg.common.v1_0_0.Resource collected = 2; // æ”¶é›†åˆ°çš„èµ„æº
    BuildingInfo building = 3;               // æ›´æ–°åçš„å»ºç­‘ä¿¡æ¯
}

// å»ºç­‘ç±»å‹æšä¸¾
enum BuildingType {
    BUILDING_TYPE_UNKNOWN = 0;
    BUILDING_TYPE_CITY_HALL = 1;             // å¸‚æ”¿å?
    BUILDING_TYPE_BARRACKS = 2;              // å…µè¥
    BUILDING_TYPE_FARM = 3;                  // å†œåœº
    BUILDING_TYPE_MINE = 4;                  // çŸ¿åœº
    BUILDING_TYPE_LUMBER_MILL = 5;           // ä¼æœ¨åœ?
    BUILDING_TYPE_QUARRY = 6;                // é‡‡çŸ³åœ?
    BUILDING_TYPE_WAREHOUSE = 7;             // ä»“åº“
    BUILDING_TYPE_WALL = 8;                  // åŸå¢™
    BUILDING_TYPE_WATCHTOWER = 9;            // ç­æœ›å¡?
    BUILDING_TYPE_ACADEMY = 10;              // å­¦é™¢
    BUILDING_TYPE_WORKSHOP = 11;             // å·¥åŠ
    BUILDING_TYPE_MARKET = 12;               // å¸‚åœº
    BUILDING_TYPE_TEMPLE = 13;               // ç¥åº™
    BUILDING_TYPE_HOSPITAL = 14;             // åŒ»é™¢
}

// å»ºç­‘çŠ¶æ€æšä¸?
enum BuildingStatus {
    BUILDING_STATUS_UNKNOWN = 0;
    BUILDING_STATUS_NORMAL = 1;              // æ­£å¸¸
    BUILDING_STATUS_CONSTRUCTING = 2;        // å»ºé€ ä¸­
    BUILDING_STATUS_UPGRADING = 3;           // å‡çº§ä¸?
    BUILDING_STATUS_PRODUCING = 4;           // ç”Ÿäº§ä¸?
    BUILDING_STATUS_DAMAGED = 5;             // æŸå
    BUILDING_STATUS_DISABLED = 6;            // åœç”¨
}

// åŸå¸‚çŠ¶æ€æšä¸?
enum CityStatus {
    CITY_STATUS_UNKNOWN = 0;
    CITY_STATUS_NORMAL = 1;                  // æ­£å¸¸
    CITY_STATUS_PROTECTED = 2;               // ä¿æŠ¤çŠ¶æ€?
    CITY_STATUS_UNDER_ATTACK = 3;            // é­å—æ”»å‡»
    CITY_STATUS_OCCUPIED = 4;                // è¢«å é¢?
    CITY_STATUS_ABANDONED = 5;               // åºŸå¼ƒ
}

// ç”Ÿäº§ç±»å‹æšä¸¾
enum ProductionType {
    PRODUCTION_TYPE_UNKNOWN = 0;
    PRODUCTION_TYPE_RESOURCE = 1;            // èµ„æºç”Ÿäº§
    PRODUCTION_TYPE_UNIT = 2;                // å•ä½è®­ç»ƒ
    PRODUCTION_TYPE_RESEARCH = 3;            // ç ”ç©¶
    PRODUCTION_TYPE_ITEM = 4;                // ç‰©å“åˆ¶é€?
}

// ç”Ÿäº§çŠ¶æ€æšä¸?
enum ProductionStatus {
    PRODUCTION_STATUS_UNKNOWN = 0;
    PRODUCTION_STATUS_PENDING = 1;           // ç­‰å¾…ä¸?
    PRODUCTION_STATUS_PRODUCING = 2;         // ç”Ÿäº§ä¸?
    PRODUCTION_STATUS_COMPLETED = 3;         // å·²å®Œæˆ?
    PRODUCTION_STATUS_CANCELLED = 4;         // å·²å–æ¶?
    PRODUCTION_STATUS_PAUSED = 5;            // æš‚åœ
}